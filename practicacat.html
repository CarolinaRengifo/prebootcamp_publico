<!DOCTYPE html>
<html>
<head>
    <title>PacMan Gato</title>
    <style type="text/css">
        *{ margin: 0; padding: 0; }
        .fila{ line-height: 0; }
        .pared, .blank, .burguer, .papitas {
            height: 40px; width: 40px; display: inline-block;
        }
        .pared { background-color: purple; }
        .blank { background-color: black; }
        .burguer {
            background: black url('img-pac-cat/burguer.png') no-repeat;
            background-size: contain;
        }
        .papitas {
            background: black url('img-pac-cat/papitas.png') no-repeat;
            background-size: contain;
        }
        #gato, #perro {
            background-color: black;
            height: 40px;
            width: 40px;
            display: inline-block;
            background-size: contain;
            position: absolute;
        }
        #gato { background-image: url('img-pac-cat/gato.gif'); }
        #perro { background-image: url('img-pac-cat/perro.gif'); }
        #info {
            padding: 10px;
            background: #222;
            color: #fff;
            font-family: sans-serif;
        }
    </style>
</head>
<body>
<div id='mundo'></div>
<div id='gato'></div>
<div id='perro'></div>
<div id="info">
    <h3>Puntaje: <span id="puntaje">0</span></h3>
    <h3>Vidas: <span id="vidas">3</span></h3>
    <h3>Gato - üçî: <span id="gatoBurgers">0</span> üçü: <span id="gatoPapitas">0</span></h3>
    <h3>Perro - üçî: <span id="perroBurgers">0</span> üçü: <span id="perroPapitas">0</span></h3>
</div>

<script type="text/javascript">
function generarCelda() {
    let numero = Math.floor(Math.random() * 10);
    if (numero < 5) return 2; // burguer
    else if (numero < 7) return 3; // papitas
    else if (numero < 9) return 0; // espacio
    else return 1; // pared
}

var mundo = Array.from({ length: 10 }, (_, y) =>
    Array.from({ length: 10 }, (_, x) =>
        (y === 0 || y === 9 || x === 0 || x === 9) ? 1 : generarCelda()
    )
);
mundo[1][1] = 0;

var mundoDict = { 0: 'blank', 1: 'pared', 2: 'burguer', 3: 'papitas' };
var puntaje = 0, vidas = 3;

let contador = {
    gato: { burguer: 0, papitas: 0 },
    perro: { burguer: 0, papitas: 0 }
};

function actualizarContadores() {
    document.getElementById("puntaje").innerText = puntaje;
    document.getElementById("vidas").innerText = vidas;
    document.getElementById("gatoBurgers").innerText = contador.gato.burguer;
    document.getElementById("gatoPapitas").innerText = contador.gato.papitas;
    document.getElementById("perroBurgers").innerText = contador.perro.burguer;
    document.getElementById("perroPapitas").innerText = contador.perro.papitas;
}

function dibujarMundo() {
    document.getElementById('mundo').innerHTML = mundo.map(
        fila => `<div class='fila'>${fila.map(cell => `<div class='${mundoDict[cell]}'></div>`).join('')}</div>`
    ).join('');
}

dibujarMundo();

var gato = { x: 1, y: 1 };
function dibujarGato() {
    document.getElementById('gato').style.left = gato.x * 40 + 'px';
    document.getElementById('gato').style.top = gato.y * 40 + 'px';
}
dibujarGato();

var perro = { x: 2, y: 3 };
function dibujarPerro() {
    document.getElementById('perro').style.left = perro.x * 40 + 'px';
    document.getElementById('perro').style.top = perro.y * 40 + 'px';
}
dibujarPerro();

function muevePerro() {
    let dir = Math.floor(Math.random() * 4);
    let dx = [ -1, 1, 0, 0 ];
    let dy = [ 0, 0, -1, 1 ];
    let nx = perro.x + dx[dir];
    let ny = perro.y + dy[dir];

    if (mundo[ny][nx] !== 1) {
        if (mundo[ny][nx] === 2) { contador.perro.burguer++; mundo[ny][nx] = 0; }
        else if (mundo[ny][nx] === 3) { contador.perro.papitas++; mundo[ny][nx] = 0; }
        perro.x = nx; perro.y = ny;
    }
}

document.onkeydown = function(e) {
    let moved = false;
    if (e.keyCode === 37 && mundo[gato.y][gato.x - 1] !== 1) { gato.x--; moved = true; }
    else if (e.keyCode === 38 && mundo[gato.y - 1][gato.x] !== 1) { gato.y--; moved = true; }
    else if (e.keyCode === 39 && mundo[gato.y][gato.x + 1] !== 1) { gato.x++; moved = true; }
    else if (e.keyCode === 40 && mundo[gato.y + 1][gato.x] !== 1) { gato.y++; moved = true; }

    if (moved) {
        if (mundo[gato.y][gato.x] === 2) { puntaje += 10; contador.gato.burguer++; mundo[gato.y][gato.x] = 0; }
        else if (mundo[gato.y][gato.x] === 3) { puntaje += 5; contador.gato.papitas++; mundo[gato.y][gato.x] = 0; }

        if (gato.x === perro.x && gato.y === perro.y) { vidas--; }
        if (vidas <= 0) return document.write("<h1>Game Over!</h1><p>Puntaje: " + puntaje + "</p>");

        dibujarMundo();
        dibujarGato();
        actualizarContadores();
    }
};

function bucle() {
    muevePerro();
    dibujarPerro();
    actualizarContadores();
    setTimeout(bucle, 700);
}

bucle();
</script>
</body>
</html>
